---
layout: default
title: 内容提供程序（Content Providers）
---

<!DOCTYPE html><html lang="en"><head>
<title> 内容提供程序（Content Providers）</title>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="()">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<style type="text/css">

</style>
</head><body>
<div><div class="preview" id="wmd-preview">
<style>
a:focus {
	outline:	thin dotted #333;
	outline:	5px auto -webkit-focus-ring-color;
	outline-offset:	-2px;
}
a:hover {
	outline:	0;
}
a:active {
	outline:	0;
}
a:hover {
	color:	#005580 !important;
	text-decoration:	underline !important;
}
blockquote   small:before {
	content:	'\2014 \00A0';
}
q:before {
	content:	"";
}
q:after {
	content:	"";
}
blockquote:before {
	content:	"";
}
blockquote:after {
	content:	"";
}
.hljs-folder:before {
	top:	0;
	content:	'';
	width:	14px;
	height:	12px;
	margin-top:	0px;
	margin-right:	3px;
	position:	relative;
	display:	inline-block;
	background-size:	14px;
	background-repeat:	no-repeat;
}
.hljs-file:before {
	top:	0;
	content:	'';
	width:	14px;
	height:	12px;
	margin-top:	0px;
	margin-right:	3px;
	position:	relative;
	display:	inline-block;
	background-size:	14px;
	background-repeat:	no-repeat;
}
.hljs-hiddenfile:before {
	top:	0;
	content:	'';
	width:	14px;
	height:	12px;
	margin-top:	0px;
	margin-right:	3px;
	position:	relative;
	display:	inline-block;
	background-size:	14px;
	background-repeat:	no-repeat;
}
.hljs-file:before {
	height:	14px;
	margin-left:	1px;
}
.hljs-hiddenfile:before {
	height:	14px;
	margin-left:	1px;
}
.hljs-file.photo:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c5";
}
.hljs-file.plain:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f016";
}
.hljs-file.source:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c9";
}
.hljs-file.archive:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c6";
}
.hljs-file.audio:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c7";
}
.hljs-file.video:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c8";
}
.hljs-file.pdf:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c1";
}
.hljs-file.xls:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c3";
}
.hljs-file.doc:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c2";
}
.hljs-file.ppt:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f1c4";
}
.hljs-folder:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f114";
}
.hljs-hiddenfile:before {
	font:	normal normal normal 14px / 1 FontAwesome;
	content:	"\f016";
}
li.li_linenum:before {
	content:	counter(lines , decimal);
	position:	absolute;
	left:	0px;
	text-align:	center;
	width:	2.5em;
	opacity:	0.5;
	vertical-align:	top;
}

</style><body style="font-family: Helvetica , Tahoma , Arial , STXihei , &quot;&#x534E;&#x6587;&#x7EC6;&#x9ED1;&quot; , &quot;Microsoft YaHei&quot; , &quot;&#x5FAE;&#x8F6F;&#x96C5;&#x9ED1;&quot; , Heiti , &quot;&#x9ED1;&#x4F53;&quot; , SimSun , &quot;&#x5B8B;&#x4F53;&quot; , sans-serif; font-size: 1.15em; font-weight: 100; color: #2f2f2f;">
	<div class="preview"><h1 id="e58685e5aeb9e68f90e4be9be7a88be5ba8fefbc88content20providersefbc89" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.6; color: inherit; text-rendering: optimizelegibility; font-size: 38.5px;">内容提供程序（Content Providers）</h1>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">标签（空格分隔）： Android ContentProvider</p>
<hr style="margin-top: 20px; margin-right: 0; margin-bottom: 20px; margin-left: 0; border: 0; border-top: 1px solid #eeeeee; border-bottom: 1px solid #ffffff;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p><div class="toc">
<ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li style="list-style: none;"><a href="#e58685e5aeb9e68f90e4be9be7a88be5ba8fefbc88content20providersefbc89" data-line="-1" style="color: #0088cc; text-decoration: none;">内容提供程序（Content Providers）</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e4b880e38081e58685e5aeb9e68f90e4be9be7a88be5ba8fe59fbae7a180e79fa5e8af86" data-line="-1" style="color: #0088cc; text-decoration: none;">一、内容提供程序基础知识</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#1e38081e6a682e8a788" data-line="-1" style="color: #0088cc; text-decoration: none;">1、概览</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e8aebfe997aee68f90e4be9be7a88be5ba8f" data-line="-1" style="color: #0088cc; text-decoration: none;">访问提供程序</a></li>
<li style="list-style: none;"><a href="#e58685e5aeb9uri" data-line="-1" style="color: #0088cc; text-decoration: none;">内容URI</a></li>
</ul>
</li>
<li style="list-style: none;"><a href="#2e38081e4bb8ee68f90e4be9be7a88be5ba8fe6a380e7b4a2e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">2、从提供程序检索数据</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e8afb7e6b182e8afbbe58f96e8aebfe997aee69d83e99990" data-line="-1" style="color: #0088cc; text-decoration: none;">请求读取访问权限</a></li>
<li style="list-style: none;"><a href="#e998b2e6ada2e681b6e6848fe8be93e585a5" data-line="-1" style="color: #0088cc; text-decoration: none;">防止恶意输入</a></li>
<li style="list-style: none;"><a href="#e698bee7a4bae69fa5e8afa2e7bb93e69e9c" data-line="-1" style="color: #0088cc; text-decoration: none;">显示查询结果</a></li>
<li style="list-style: none;"><a href="#e4bb8ee69fa5e8afa2e7bb93e69e9ce4b8ade88eb7e58f96e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">从查询结果中获取数据</a></li>
</ul>
</li>
<li style="list-style: none;"><a href="#3e38081e58685e5aeb9e68f90e4be9be7a88be5ba8fe69d83e99990" data-line="-1" style="color: #0088cc; text-decoration: none;">3、内容提供程序权限</a></li>
<li style="list-style: none;"><a href="#4e38081e68f92e585a5e38081e69bb4e696b0e5928ce588a0e999a4e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">4、插入、更新和删除数据</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e68f92e585a5e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">插入数据</a></li>
<li style="list-style: none;"><a href="#e69bb4e696b0e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">更新数据</a></li>
<li style="list-style: none;"><a href="#e588a0e999a4e695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">删除数据</a></li>
</ul>
</li>
<li style="list-style: none;"><a href="#5e38081e68f90e4be9be7a88be5ba8fe695b0e68daee7b1bbe59e8b" data-line="-1" style="color: #0088cc; text-decoration: none;">5、提供程序数据类型</a></li>
<li style="list-style: none;"><a href="#6e38081e68f90e4be9be7a88be5ba8fe8aebfe997aee79a84e69bbfe4bba3e5bda2e5bc8f" data-line="-1" style="color: #0088cc; text-decoration: none;">6、提供程序访问的替代形式</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e689b9e9878fe8aebfe997ae" data-line="-1" style="color: #0088cc; text-decoration: none;">批量访问</a></li>
<li style="list-style: none;"><a href="#e9809ae8bf87intente8aebfe997aee695b0e68dae" data-line="-1" style="color: #0088cc; text-decoration: none;">通过Intent访问数据</a><ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 25px;">
<li style="list-style: none;"><a href="#e9809ae8bf87e4b8b4e697b6e69d83e99990e88eb7e58f96e8aebfe997aee69d83e99990" data-line="-1" style="color: #0088cc; text-decoration: none;">通过临时权限获取访问权限</a></li>
<li style="list-style: none;"><a href="#e4bdbfe794a8e585b6e4bb96e5ba94e794a8" data-line="-1" style="color: #0088cc; text-decoration: none;">使用其他应用</a></li>
</ul>
</li>
</ul>
</li>
<li style="list-style: none;"><a href="#7e38081e58d8fe5ae9ae7b1bb" data-line="-1" style="color: #0088cc; text-decoration: none;">7、协定类</a></li>
<li style="list-style: none;"><a href="#8e38081mime20e7b1bbe59e8be5bc95e794a8" data-line="-1" style="color: #0088cc; text-decoration: none;">8、MIME 类型引用</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序管理对结构化数据集的访问。它们封装数据，并提供用于定义数据安全性的机制。 内容提供程序是连接一个进程中的数据与另一个进程中运行的代码的标准界面。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果您想要访问内容提供程序中的数据，可以将应用的 Context 中的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 对象用作客户端来与提供程序通信。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 对象会与提供程序对象（即实现 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 的类实例）通信。 提供程序对象从客户端接收数据请求，执行请求的操作并返回结果。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果您不打算与其他应用共享数据，则无需开发自己的提供程序。 不过，您需要通过自己的提供程序在您自己的应用中提供自定义搜索建议。 如果您想将复杂的数据或文件从您的应用复制并粘贴到其他应用中，也需要创建您自己的提供程序。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">Android 本身包括的内容提供程序可管理音频、视频、图像和个人联系信息等数据。 <a href="http://developer.android.com/reference/android/provider/package-summary.html" target="_blank" style="color: #0088cc; text-decoration: none;">android.provider</a> 软件包参考文档中列出了部分提供程序。 任何 Android 应用都可以访问这些提供程序，但会受到某些限制。</p>
<h2 id="e4b880e38081e58685e5aeb9e68f90e4be9be7a88be5ba8fe59fbae7a180e79fa5e8af86" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 40px; color: inherit; text-rendering: optimizelegibility; font-size: 31.5px;">一、内容提供程序基础知识</h2>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序管理对中央数据存储库的访问。提供程序是 Android 应用的一部分，通常提供自己的 UI 来使用数据。但是，内容提供程序主要旨在供其他应用使用，这些应用使用提供程序客户端对象来访问提供程序。提供程序与提供程序客户端共同提供一致的标准数据界面，该接口还可处理跨进程通信并保护数据访问的安全性。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">本主题介绍了以下基础知识：</p>
<ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序的工作方式。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">用于从内容提供程序检索数据的 API。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">用于在内容提供程序中插入、更新或删除数据的 API。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">其他有助于使用提供程序的 API 功能。</p></li>
</ul>
<h3 id="1e38081e6a682e8a788" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">1、概览</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序以一个或多个表（与在关系数据库中找到的表类似）的形式将数据呈现给外部应用。 行表示提供程序收集的某种数据类型的实例，行中的每个列表示为实例收集的每条数据。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，Android 平台的内置提供程序之一是用户字典，它会存储用户想要保存的非标准字词的拼写。 表 1 描述了数据在此提供程序表中的显示情况：</p>
<table class="table table-striped  " style="max-width: 100%; background-color: transparent; border-collapse: collapse; border-spacing: 0; width: 100%; margin-bottom: 20px;">
<colgroup>
<col style="text-align: left;">
<col style="text-align: left;">
<col style="text-align: center;">
<col style="text-align: left;">
<col style="text-align: left;">
</colgroup>
<thead>
<tr>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">字词</th>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">应用 id</th>
<th style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">频率</th>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">区域设置</th>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">_ID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">mapreduce</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">user1</td>
<td style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">100</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">en_US</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">1</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">precompiler</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">user14</td>
<td style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">200</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">fr_FR</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">2</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">applet</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">user2</td>
<td style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">225</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">fr_CA</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">3</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">const</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">user1</td>
<td style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">255</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">pt_BR</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">4</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">int</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">user5</td>
<td style="text-align: center; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">100</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">en_UK</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">5</td>
</tr>
</tbody>
</table>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p><center>表 1：用户字典示例表格。</center><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在表 1 中，每行表示可能无法在标准词典中找到的字词实例。 每列表示该字词的某些数据，如该字词首次出现时的区域设置。 列标题是存储在提供程序中的列名称。 要引用行的区域设置，需要引用其 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">locale</code>(区域设置) 列。对于此提供程序，<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code> 列充当由提供程序自动维护的“主键”列。</p>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：提供程序无需具有主键，也无需将 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code> 用作其主键的列名称（如果存在主键）。 但是，如果您要将来自提供程序的数据与 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ListView</code> 绑定，则其中一个列名称必须是 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code>。 <a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#DisplayResults" target="_blank" style="color: #0088cc; text-decoration: none;">显示查询结果</a>部分详细说明了此要求。</p>
</blockquote>
<h4 id="e8aebfe997aee68f90e4be9be7a88be5ba8f" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">访问提供程序</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">应用从具有 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 客户端对象的内容提供程序访问数据。 此对象具有调用提供程序对象（<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 的某个具体子类的实例）中同名方法的方法。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 方法可提供持续存储的基本“CRUD”（创建、检索、更新和删除）功能。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">客户端应用进程中的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 对象和拥有提供程序的应用中的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 对象可<strong style="font-weight: bold;">自动处理跨进程通信</strong>。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 还可充当其数据存储库和表格形式的数据外部显示之间的抽象层。</p>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：要访问提供程序，您的应用通常需要在其清单文件中请求特定权限。 <a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#Permissions" target="_blank" style="color: #0088cc; text-decoration: none;">内容提供程序权</a>限部分详细介绍了此内容。</p>
</blockquote>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，要从用户字典提供程序中获取字词及其区域设置的列表，则需调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.query()</code>。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">query()</code> 方法会调用用户字典提供程序所定义的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider.query()</code> 方法。 以下代码行显示了 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.query()</code> 调用：</p>
<pre style="word-wrap: break-word;"><code class="hljs stata code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Queries the user dictionary and returns results</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mCursor = getContentResolver().<span class="hljs-keyword" style="color: #aa0d91;">query</span>(&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.CONTENT_URI,   <span class="hljs-comment" style="color: #006a00;">// The content URI of the words table</span>&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mProjection,                        <span class="hljs-comment" style="color: #006a00;">// The columns to return for each row</span>&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause                    <span class="hljs-comment" style="color: #006a00;">// Selection criteria</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs,                     <span class="hljs-comment" style="color: #006a00;">// Selection criteria</span>&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSortOrder);                        <span class="hljs-comment" style="color: #006a00;">// The sort order for the returned rows</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">表 2 显示了 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">query(Uri,projection,selection,selectionArgs,sortOrder)</code> 的参数如何匹配 SQL SELECT 语句：</p>
<table class="table table-striped  " style="max-width: 100%; background-color: transparent; border-collapse: collapse; border-spacing: 0; width: 100%; margin-bottom: 20px;">
<colgroup>
<col style="text-align: left;">
<col style="text-align: left;">
<col style="text-align: left;">
</colgroup>
<thead>
<tr>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">query() 参数</th>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">SELECT 关键字/参数</th>
<th style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: bottom; border-top: 0; font-weight: bold;">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">Uri</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">FROM table_name</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">Uri 映射至名为 table_name 的提供程序中的表。</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">projection</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">col,col,col,...</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">projection 是应该为检索到的每个行包含的列的数组。</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">selection</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">WHERE col = value</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">selection 会指定选择行的条件。</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;">selectionArgs</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd;" colspan="2">（没有完全等效项。选择参数会替换选择子句中 ? 的占位符。）</td>
</tr>
<tr>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">sortOrder</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">ORDER BY col,col,...</td>
<td style="text-align: left; padding-top: 8px; padding-right: 8px; padding-bottom: 8px; padding-left: 8px; line-height: 20px; vertical-align: top; border-top: 1px solid #dddddd; background-color: #f9f9f9;">sortOrder 指定行在返回的 Cursor 中的显示顺序。</td>
</tr>
</tbody>
</table>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p><center>表 2：Query() 与 SQL 查询对比。</center><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"></p>
<h4 id="e58685e5aeb9uri" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">内容URI</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><strong style="font-weight: bold;">内容 URI</strong> 是用于在提供程序中标识数据的 URI。内容 URI 包括整个提供程序的符号名称（其<strong style="font-weight: bold;">权限</strong>）和一个指向表的名称（<strong style="font-weight: bold;">路径</strong>）。 当您调用客户端方法来访问提供程序中的表时，该表的内容 URI 将是其参数之一。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在前面的代码行中，常量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">CONTENT_URI</code> 包含用户字典的“字词”表的内容 URI。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 对象会分析出 URI 的授权，并通过将该授权与已知提供程序的系统表进行比较，来“解析”提供程序。 然后， <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 可以将查询参数分派给正确的提供程序。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 使用内容 URI 的路径部分来选择要访问的表。 提供程序通常会为其公开的每个表显示一条<strong style="font-weight: bold;">路径</strong>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在前面的代码行中，“字词”表的完整 URI 是：</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-attribute">content</span>:<span class="hljs-comment" style="color: #006a00;">//user_dictionary/words</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">其中，<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">user_dictionary</code> 字符串是提供程序的授权， <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">words</code> 字符串是表的路径。字符串 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">content://</code>（架构）始终显示，并将此标识为内容 URI。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">许多提供程序都允许您通过将 ID 值追加到 URI 末尾来访问表中的单个行。例如，要从用户字典中检索<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code>为 4 的行，则可使用此内容 URI：</p>
<pre style="word-wrap: break-word;"><code class="hljs protobuf code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-constant">Uri singleUri</span> = ContentUris.withAppendedId(UserDictionary.Words.CONTENT_URI,<span class="hljs-number" style="color: #1c00cf;">4</span>);&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在检索到一组行后想要更新或删除其中某一行时通常会用到 ID 值。</p>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Uri</code> 和 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Uri.Builder</code> 类 包含根据字符串构建格式规范的 URI 对象的便利方法。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentUris</code> 包含一些可以将 ID 值轻松追加到 URI 后的方法。前面的代码段就是使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">withAppendedId()</code> 将 ID 追加到用户字典内容 URI 后。</p>
</blockquote>
<h3 id="2e38081e4bb8ee68f90e4be9be7a88be5ba8fe6a380e7b4a2e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">2、从提供程序检索数据</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">本节将以用户字典提供程序为例，介绍如何从提供程序中检索数据。</p>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">为了明确进行说明，本节中的代码段将在“UI 线程”上调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.query()</code>。但在实际代码中，您应该在单独线程上异步执行查询。 执行此操作的方式之一是使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">CursorLoader</code> 类，<a href="http://developer.android.com/guide/components/loaders.html" target="_blank" style="color: #0088cc; text-decoration: none;">加载器</a>指南中对此有更为详细的介绍。 此外，前述代码行只是代码段；它们不会显示整个应用。</p>
</blockquote>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要从提供程序中检索数据，请按照以下基本步骤执行操作：</p>
<ol style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">请求对提供程序的读取访问权限。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">定义将查询发送至提供程序的代码。</p></li>
</ol>
<h4 id="e8afb7e6b182e8afbbe58f96e8aebfe997aee69d83e99990" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">请求读取访问权限</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要从提供程序检索数据，您的应需要具备对提供程序的“读取访问”权限。 您无法在运行时请求此权限；相反，您需要使用<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;uses-permission&gt;</code>元素和提供程序定义的准确权限名称，在清单文件中指明您需要此权限。 在您的清单文件中指定此元素后，您将有效地为应用“请求”此权限。 用户安装您的应用时，会隐式授予允许此请求。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要找出您正在使用的提供程序的读取访问权限的准确名称，以及提供程序使用的其他访问权限的名称，请查看提供程序的文档。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#Permissions" target="_blank" style="color: #0088cc; text-decoration: none;">内容提供程序权限</a>部分详细介绍了权限在访问提供程序过程中的作用。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">用户字典提供程序在其清单文件中定义了权限 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">android.permission.READ_USER_DICTIONARY</code>，因此希望从提供程序中进行读取的应用必需请求此权限。<br>
####<strong style="font-weight: bold;">构建查询</strong><br>
从提供程序中检索数据的下一步是构建查询。第一个代码段定义某些用于访问用户字典提供程序的变量：</p>
<pre style="word-wrap: break-word;"><code class="hljs javascript code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// A "projection" defines the columns that will be returned for each row</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span>[] mProjection =&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">{&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words._ID,    <span class="hljs-comment" style="color: #006a00;">// Contract class constant for the _ID column name</span>&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.WORD,   <span class="hljs-comment" style="color: #006a00;">// Contract class constant for the word column name</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.LOCALE  <span class="hljs-comment" style="color: #006a00;">// Contract class constant for the locale column name</span>&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">};&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines a string to contain the selection clause</span>&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span> mSelectionClause = <span class="hljs-literal" style="color: #aa0d91;">null</span>;&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Initializes an array to contain selection arguments</span>&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span>[] mSelectionArgs = {<span class="hljs-string" style="color: #c41a16;">""</span>};&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">下一个代码段以用户字典提供程序为例，显示了如何使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.query()</code>。 提供程序客户端查询与 SQL 查询类似，并且包含一组要返回的列、一组选择条件和排序顺序。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">查询应该返回的列集被称为投影（变量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">mProjection</code>）。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">用于指定要检索的行的表达式分割为选择子句和选择参数。 选择子句是逻辑和布尔表达式、列名称和值（变量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">mSelectionClause</code>）的组合。 如果您指定了可替换参数 ? 而非值，则查询方法会从选择参数数组（变量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">mSelectionArgs</code>）中检索值。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在下一个代码段中，如果用户未输入字词，则选择子句将设置为 null，而且查询会返回提供程序中的所有字词。 如果用户输入了字词，选择子句将设置为 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">UserDictionary.Words.WORD + " = ?"</code> 且选择参数数组的第一个元素将设置为用户输入的字词。</p>
<pre style="word-wrap: break-word;"><code class="hljs javascript code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">/*</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;"> * This defines a one-element String array to contain the selection argument.</span>&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;"> */</span>&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span>[] mSelectionArgs = {<span class="hljs-string" style="color: #c41a16;">""</span>};&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Gets a word from the UI</span>&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mSearchString = mSearchWord.getText().toString();&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Remember to insert code here to check for invalid or malicious input.</span>&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// If the word is the empty string, gets everything</span>&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">if</span> (TextUtils.isEmpty(mSearchString)) {&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">// Setting the selection clause to null will return all words</span>&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause = <span class="hljs-literal" style="color: #aa0d91;">null</span>;&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs[<span class="hljs-number" style="color: #1c00cf;">0</span>] = <span class="hljs-string" style="color: #c41a16;">""</span>;&nbsp;</li><li class="li_linenum " date-linenum="16" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="17" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">} <span class="hljs-keyword" style="color: #aa0d91;">else</span> {&nbsp;</li><li class="li_linenum " date-linenum="18" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">// Constructs a selection clause that matches the word that the user entered.</span>&nbsp;</li><li class="li_linenum " date-linenum="19" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause = UserDictionary.Words.WORD + <span class="hljs-string" style="color: #c41a16;">" = ?"</span>;&nbsp;</li><li class="li_linenum " date-linenum="20" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="21" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">// Moves the user's input string to the selection arguments.</span>&nbsp;</li><li class="li_linenum " date-linenum="22" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs[<span class="hljs-number" style="color: #1c00cf;">0</span>] = mSearchString;&nbsp;</li><li class="li_linenum " date-linenum="23" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="24" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">}&nbsp;</li><li class="li_linenum " date-linenum="25" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="26" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Does a query against the table and returns a Cursor object</span>&nbsp;</li><li class="li_linenum " date-linenum="27" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mCursor = getContentResolver().query(&nbsp;</li><li class="li_linenum " date-linenum="28" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.CONTENT_URI,  <span class="hljs-comment" style="color: #006a00;">// The content URI of the words table</span>&nbsp;</li><li class="li_linenum " date-linenum="29" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mProjection,                       <span class="hljs-comment" style="color: #006a00;">// The columns to return for each row</span>&nbsp;</li><li class="li_linenum " date-linenum="30" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause                   <span class="hljs-comment" style="color: #006a00;">// Either null, or the word the user entered</span>&nbsp;</li><li class="li_linenum " date-linenum="31" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs,                    <span class="hljs-comment" style="color: #006a00;">// Either empty, or the string the user entered</span>&nbsp;</li><li class="li_linenum " date-linenum="32" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSortOrder);                       <span class="hljs-comment" style="color: #006a00;">// The sort order for the returned rows</span>&nbsp;</li><li class="li_linenum " date-linenum="33" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="34" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Some providers return null if an error occurs, others throw an exception</span>&nbsp;</li><li class="li_linenum " date-linenum="35" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">if</span> (<span class="hljs-literal" style="color: #aa0d91;">null</span> == mCursor) {&nbsp;</li><li class="li_linenum " date-linenum="36" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">/*</span>&nbsp;</li><li class="li_linenum " date-linenum="37" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     * Insert code here to handle the error. Be sure not to use the cursor! You may want to</span>&nbsp;</li><li class="li_linenum " date-linenum="38" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     * call android.util.Log.e() to log this error.</span>&nbsp;</li><li class="li_linenum " date-linenum="39" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     *</span>&nbsp;</li><li class="li_linenum " date-linenum="40" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     */</span>&nbsp;</li><li class="li_linenum " date-linenum="41" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// If the Cursor is empty, the provider found no matches</span>&nbsp;</li><li class="li_linenum " date-linenum="42" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">} <span class="hljs-keyword" style="color: #aa0d91;">else</span> <span class="hljs-keyword" style="color: #aa0d91;">if</span> (mCursor.getCount() &lt; <span class="hljs-number" style="color: #1c00cf;">1</span>) {&nbsp;</li><li class="li_linenum " date-linenum="43" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="44" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">/*</span>&nbsp;</li><li class="li_linenum " date-linenum="45" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     * Insert code here to notify the user that the search was unsuccessful. This isn't necessarily</span>&nbsp;</li><li class="li_linenum " date-linenum="46" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     * an error. You may want to offer the user the option to insert a new row, or re-type the</span>&nbsp;</li><li class="li_linenum " date-linenum="47" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     * search term.</span>&nbsp;</li><li class="li_linenum " date-linenum="48" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">     */</span>&nbsp;</li><li class="li_linenum " date-linenum="49" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="50" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">} <span class="hljs-keyword" style="color: #aa0d91;">else</span> {&nbsp;</li><li class="li_linenum " date-linenum="51" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">// Insert code here to do something with the results</span>&nbsp;</li><li class="li_linenum " date-linenum="52" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="53" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">}&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">此查询与 SQL 语句相似：</p>
<pre style="word-wrap: break-word;"><code class="hljs sql code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-operator"><span class="hljs-keyword" style="color: #aa0d91;">SELECT</span> _ID, word, locale <span class="hljs-keyword" style="color: #aa0d91;">FROM</span> words <span class="hljs-keyword" style="color: #aa0d91;">WHERE</span> word = &lt;userinput&gt; <span class="hljs-keyword" style="color: #aa0d91;">ORDER</span> <span class="hljs-keyword" style="color: #aa0d91;">BY</span> word <span class="hljs-keyword" style="color: #aa0d91;">ASC</span>;</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在此 SQL 语句中，会使用实际的列名称而非协定类常量。</p>
<h4 id="e998b2e6ada2e681b6e6848fe8be93e585a5" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">防止恶意输入</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果内容提供程序管理的数据位于 SQL 数据库中，将不受信任的外部数据包括在原始 SQL 语句中可能会导致 SQL 注入。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">考虑此选择子句：</p>
<pre style="word-wrap: break-word;"><code class="hljs javascript code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Constructs a selection clause by concatenating the user's input to the column name</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span> mSelectionClause =  <span class="hljs-string" style="color: #c41a16;">"var = "</span> + mUserInput;&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果您执行此操作，则会允许用户将恶意 SQL 串连到 SQL 语句上。 例如，用户可以为 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">mUserInput</code> 输入<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">“nothing; DROP TABLE *;”</code>，这会生成选择子句 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">var = nothing; DROP TABLE *;</code>。 由于选择子句是作为 SQL 语句处理，因此这可能会导致提供程序擦除基础 SQLite 数据库中的所有表（除非提供程序设置为可捕获 <a href="http://en.wikipedia.org/wiki/SQL_injection" target="_blank" style="color: #0088cc; text-decoration: none;">SQL 注入</a>尝试）。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要避免此问题，可使用一个用于将 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">?</code> 作为可替换参数的选择子句以及一个单独的选择参数数组。 执行此操作时，用户输入直接受查询约束，而不解释为 SQL 语句的一部分。 由于用户输入未作为 SQL 处理，因此无法注入恶意 SQL。请使用此选择子句，而不要使用串连来包括用户输入：</p>
<pre style="word-wrap: break-word;"><code class="hljs javascript code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Constructs a selection clause with a replaceable parameter</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">String</span> mSelectionClause =  <span class="hljs-string" style="color: #c41a16;">"var = ?"</span>;&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">按如下所示设置选择参数数组：</p>
<pre style="word-wrap: break-word;"><code class="hljs smali code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">// Defines an<span class="hljs-instruction"> array </span>to contain the selection arguments&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">String<span class="hljs-keyword" style="color: #aa0d91;">[</span>] selectionArgs = {<span class="hljs-string" style="color: #c41a16;">""</span>};&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">按如下所示将值置于选择参数数组中：</p>
<pre style="word-wrap: break-word;"><code class="hljs objectivec code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Sets the selection argument to the user's input</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">selectionArgs[<span class="hljs-number" style="color: #1c00cf;">0</span>] = mUserInput;&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">一个用于将 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">?</code> 用作可替换参数的选择子句和一个选择参数数组是指定选择的首选方式，即使提供程序并未基于 SQL 数据库。</p>
<h4 id="e698bee7a4bae69fa5e8afa2e7bb93e69e9c" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">显示查询结果</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.query()</code> 客户端方法始终会返回符合以下条件的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code>：包含查询的投影为匹配查询选择条件的行指定的列。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 对象为其包含的行和列提供随机读取访问权限。 通过使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 方法，您可以循环访问结果中的行、确定每个列的数据类型、从列中获取数据，并检查结果的其他属性。 某些 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 实现会在提供程序的数据发生更改时自动更新对象和/或在 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 更改时触发观察程序对象中的方法。</p>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：提供程序可能会根据发出查询的对象的性质来限制对列的访问。 例如，联系人提供程序会限定只有同步适配器才能访问某些列，因此不会将它们返回至 Activity 或服务。</p>
</blockquote>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果没有与选择条件匹配的行，则提供程序会返回 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor.getCount()</code> 为 0（空游标）的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 对象。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果出现内部错误，查询结果将取决于具体的提供程序。它可能会选择返回 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">null</code>，或抛出 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Exception</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">由于 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 是行“列表”，因此显示 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 内容的良好方式是通过 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">SimpleCursorAdapter</code> 将其与 ListView 关联。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">以下代码段将延续上一代码段的代码。它会创建一个包含由查询检索到的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">SimpleCursorAdapter</code> 对象，并将此对象设置为 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ListView</code> 的适配器：</p>
<pre style="word-wrap: break-word;"><code class="hljs processing code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines a list of columns to retrieve from the Cursor and load into an output row</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span>[] mWordListColumns =&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">{&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.WORD,   <span class="hljs-comment" style="color: #006a00;">// Contract class constant containing the word column name</span>&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.LOCALE  <span class="hljs-comment" style="color: #006a00;">// Contract class constant containing the locale column name</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">};&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines a list of View IDs that will receive the Cursor columns for each row</span>&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">int</span>[] mWordListItems = { R.id.dictWord, R.id.locale};&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Creates a new SimpleCursorAdapter</span>&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mCursorAdapter = <span class="hljs-keyword" style="color: #aa0d91;">new</span> SimpleCursorAdapter(&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    getApplicationContext(),               <span class="hljs-comment" style="color: #006a00;">// The application's Context object</span>&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    R.layout.wordlistrow,                  <span class="hljs-comment" style="color: #006a00;">// A layout in XML for one row in the ListView</span>&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mCursor,                               <span class="hljs-comment" style="color: #006a00;">// The result from the query</span>&nbsp;</li><li class="li_linenum " date-linenum="16" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mWordListColumns,                      <span class="hljs-comment" style="color: #006a00;">// A string array of column names in the cursor</span>&nbsp;</li><li class="li_linenum " date-linenum="17" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mWordListItems,                        <span class="hljs-comment" style="color: #006a00;">// An integer array of view IDs in the row layout</span>&nbsp;</li><li class="li_linenum " date-linenum="18" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-number" style="color: #1c00cf;">0</span>);                                    <span class="hljs-comment" style="color: #006a00;">// Flags (usually none are needed)</span>&nbsp;</li><li class="li_linenum " date-linenum="19" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="20" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Sets the adapter for the ListView</span>&nbsp;</li><li class="li_linenum " date-linenum="21" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mWordList.setAdapter(mCursorAdapter)&nbsp;</li></ol></code></pre>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：要通过 Cursor 支持 ListView，游标必需包含名为 _ID 的列。 正因如此，前文显示的查询会为“字词”表检索 _ID 列，即使 ListView 未显示该列。 此限制也解释了为什么大多数提供程序的每个表都具有 _ID 列。</p>
</blockquote>
<h4 id="e4bb8ee69fa5e8afa2e7bb93e69e9ce4b8ade88eb7e58f96e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">从查询结果中获取数据</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">您可以将查询结果用于其他任务，而不是仅显示它们。例如，您可以从用户字典中检索拼写，然后在其他提供程序中查找它们。 要执行此操作，您需要在 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 中循环访问行：</p>
<pre style="word-wrap: break-word;"><code class="hljs fsharp code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Determine the column index of the column named "word"</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">int index = mCursor.getColumnIndex(UserDictionary.Words.WORD);&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">/*&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> * Only executes <span class="hljs-keyword" style="color: #aa0d91;">if</span> the cursor is valid. The User Dictionary Provider returns <span class="hljs-keyword" style="color: #aa0d91;">null</span> <span class="hljs-keyword" style="color: #aa0d91;">if</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> * an <span class="hljs-keyword" style="color: #aa0d91;">internal</span> error occurs. Other providers may throw an Exception instead <span class="hljs-keyword" style="color: #aa0d91;">of</span> returning <span class="hljs-keyword" style="color: #aa0d91;">null</span>.&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> */&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">if</span> (mCursor != <span class="hljs-keyword" style="color: #aa0d91;">null</span>) {&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    /*&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">     * Moves <span class="hljs-keyword" style="color: #aa0d91;">to</span> the next row <span class="hljs-keyword" style="color: #aa0d91;">in</span> the cursor. Before the first movement <span class="hljs-keyword" style="color: #aa0d91;">in</span> the cursor, the&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">     * <span class="hljs-string" style="color: #c41a16;">"row pointer"</span> is -<span class="hljs-number" style="color: #1c00cf;">1</span>, <span class="hljs-keyword" style="color: #aa0d91;">and</span> <span class="hljs-keyword" style="color: #aa0d91;">if</span> you <span class="hljs-keyword" style="color: #aa0d91;">try</span> <span class="hljs-keyword" style="color: #aa0d91;">to</span> retrieve data at that position you will get an&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">     * <span class="hljs-keyword" style="color: #aa0d91;">exception</span>.&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">     */&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-keyword" style="color: #aa0d91;">while</span> (mCursor.moveToNext()) {&nbsp;</li><li class="li_linenum " date-linenum="16" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="17" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">        <span class="hljs-comment" style="color: #006a00;">// Gets the value from the column.</span>&nbsp;</li><li class="li_linenum " date-linenum="18" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">        newWord = mCursor.getString(index);&nbsp;</li><li class="li_linenum " date-linenum="19" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="20" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">        <span class="hljs-comment" style="color: #006a00;">// Insert code here to process the retrieved word.</span>&nbsp;</li><li class="li_linenum " date-linenum="21" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="22" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">        ...&nbsp;</li><li class="li_linenum " date-linenum="23" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="24" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">        <span class="hljs-comment" style="color: #006a00;">// end of while loop</span>&nbsp;</li><li class="li_linenum " date-linenum="25" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    }&nbsp;</li><li class="li_linenum " date-linenum="26" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">} <span class="hljs-keyword" style="color: #aa0d91;">else</span> {&nbsp;</li><li class="li_linenum " date-linenum="27" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="28" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-comment" style="color: #006a00;">// Insert code here to report an error if the cursor is null or the provider threw an exception.</span>&nbsp;</li><li class="li_linenum " date-linenum="29" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">}&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 实现包含多个用于从对象中检索不同类型的数据的“获取”方法。 例如，上一个代码段使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">getString()</code>。 它们还具有 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">getType()</code> 方法，该方法会返回指示列的数据类型的值。</p>
<h3 id="3e38081e58685e5aeb9e68f90e4be9be7a88be5ba8fe69d83e99990" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">3、内容提供程序权限</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序的应用可以指定其他应用访问提供程序的数据所必需的权限。 这些权限可确保用户了解应用将尝试访问的数据。 根据提供程序的要求，其他应用会请求它们访问提供程序所需的权限。 最终用户会在安装应用时看到所请求的权限。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如果提供程序的应用未指定任何权限，则其他应用将无权访问提供程序的数据。 但是，无论指定权限为何，提供程序的应用中的组件始终具有完整的读取和写入访问权限。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">如前所述，用户字典提供程序需要 ·<br>
<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">android.permission.READ_USER_DICTIONARY</code> 权限才能从中检索数据。 提供程序具有用于插入、更新或删除数据的单独 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">android.permission.WRITE_USER_DICTIONARY</code> 权限。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要获取访问提供程序所需的权限，应用将通过其清单文件中的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;uses-permission&gt;</code> 元素来请求这些权限。Android 软件包管理器安装应用时，用户必须批准该应用请求的所有权限。 如果用户批准所有权限，软件包管理器将继续安装；如果用户未批准这些权限，软件包管理器将中止安装。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">以下 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;uses-permission&gt;</code> 元素会请求对用户字典提供程序的读取访问权限：</p>
<pre style="word-wrap: break-word;"><code class="hljs vbscript-html code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="xml">    <span class="hljs-tag" style="color: #1c00cf;">&lt;<span class="hljs-title" style="color: #008;">uses-permission</span> <span class="hljs-attribute" style="color: #5c2699;">android:name</span>=<span class="hljs-value" style="color: #080;">"android.permission.READ_USER_DICTIONARY"</span>&gt;</span></span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-value"></span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><a href="http://developer.android.com/guide/topics/security/security.html" target="_blank" style="color: #0088cc; text-decoration: none;">安全与权限</a>指南中详细介绍了权限对提供程序访问的影响。</p>
<h3 id="4e38081e68f92e585a5e38081e69bb4e696b0e5928ce588a0e999a4e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">4、插入、更新和删除数据</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">与从提供程序检索数据的方式相同，也可以通过提供程序客户端和提供程序<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 之间的交互来修改数据。 您通过传递到 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProvider</code> 的对应方法的参数来调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver</code> 方法。 提供程序和提供程序客户端会自动处理安全性和跨进程通信。</p>
<h4 id="e68f92e585a5e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">插入数据</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要将数据插入提供程序，可调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.insert()</code> 方法。此方法会在提供程序中插入新行并为该行返回内容 URI。 此代码段显示如何将新字词插入用户字典提供程序：</p>
<pre style="word-wrap: break-word;"><code class="hljs nimrod code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">// <span class="hljs-type" style="color: #5c2699;">Defines</span> a new <span class="hljs-type" style="color: #5c2699;">Uri</span> <span class="hljs-keyword" style="color: #aa0d91;">object</span> that receives the <span class="hljs-literal" style="color: #aa0d91;">result</span> <span class="hljs-keyword" style="color: #aa0d91;">of</span> the insertion&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-type" style="color: #5c2699;">Uri</span> mNewUri;&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">...&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">// <span class="hljs-type" style="color: #5c2699;">Defines</span> an <span class="hljs-keyword" style="color: #aa0d91;">object</span> to contain the new values to insert&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-type" style="color: #5c2699;">ContentValues</span> mNewValues = new <span class="hljs-type" style="color: #5c2699;">ContentValues</span>();&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">/*&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> * <span class="hljs-type" style="color: #5c2699;">Sets</span> the values <span class="hljs-keyword" style="color: #aa0d91;">of</span> each column <span class="hljs-keyword" style="color: #aa0d91;">and</span> inserts the word. <span class="hljs-type" style="color: #5c2699;">The</span> arguments to the <span class="hljs-string" style="color: #c41a16;">"put"</span>&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> * <span class="hljs-keyword" style="color: #aa0d91;">method</span> are <span class="hljs-string" style="color: #c41a16;">"column name"</span> <span class="hljs-keyword" style="color: #aa0d91;">and</span> <span class="hljs-string" style="color: #c41a16;">"value"</span>&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"> */&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mNewValues.put(<span class="hljs-type" style="color: #5c2699;">UserDictionary</span>.<span class="hljs-type" style="color: #5c2699;">Words</span>.<span class="hljs-type" style="color: #5c2699;">APP_ID</span>, <span class="hljs-string" style="color: #c41a16;">"example.user"</span>);&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mNewValues.put(<span class="hljs-type" style="color: #5c2699;">UserDictionary</span>.<span class="hljs-type" style="color: #5c2699;">Words</span>.<span class="hljs-type" style="color: #5c2699;">LOCALE</span>, <span class="hljs-string" style="color: #c41a16;">"en_US"</span>);&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mNewValues.put(<span class="hljs-type" style="color: #5c2699;">UserDictionary</span>.<span class="hljs-type" style="color: #5c2699;">Words</span>.<span class="hljs-type" style="color: #5c2699;">WORD</span>, <span class="hljs-string" style="color: #c41a16;">"insert"</span>);&nbsp;</li><li class="li_linenum " date-linenum="16" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mNewValues.put(<span class="hljs-type" style="color: #5c2699;">UserDictionary</span>.<span class="hljs-type" style="color: #5c2699;">Words</span>.<span class="hljs-type" style="color: #5c2699;">FREQUENCY</span>, <span class="hljs-string" style="color: #c41a16;">"100"</span>);&nbsp;</li><li class="li_linenum " date-linenum="17" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="18" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mNewUri = getContentResolver().insert(&nbsp;</li><li class="li_linenum " date-linenum="19" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    <span class="hljs-type" style="color: #5c2699;">UserDictionary</span>.<span class="hljs-type" style="color: #5c2699;">Word</span>.<span class="hljs-type" style="color: #5c2699;">CONTENT_URI</span>,   // the user dictionary content <span class="hljs-type" style="color: #5c2699;">URI</span>&nbsp;</li><li class="li_linenum " date-linenum="20" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mNewValues                          // the values to insert&nbsp;</li><li class="li_linenum " date-linenum="21" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">);&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">新行的数据会进入单个 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentValues</code> 对象中，该对象在形式上与单行游标类似。 此对象中的列不需要具有相同的数据类型，如果您不想指定值，则可以使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentValues.putNull()</code> 将列设置为<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">null</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">代码段不会添加<code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code> 列，因为系统会自动维护此列。 提供程序会向添加的每个行分配唯一的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code> 值。 通常，提供程序会将此值用作表的主键。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">newUri</code> 中返回的内容 URI 会按照以下格式标识新添加的行：</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-attribute">content</span>:<span class="hljs-comment" style="color: #006a00;">//user_dictionary/words/&lt;id_value&gt;</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;id_value&gt;</code> 是新行的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code>内容。 大多数提供程序都能自动检测这种格式的内容 URI，然后在该特定行上执行请求的操作。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要从返回的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Uri</code> 中获取 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">_ID</code> 的值，请调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentUris.parseId()</code>。</p>
<h4 id="e69bb4e696b0e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">更新数据</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要更新行，请按照执行插入的方式使用具有更新值的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentValues</code> 对象，并按照执行查询的方式使用选择条件。 您使用的客户端方法是 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.update()</code>。您只需将值添加至您要更新的列的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentValues</code> 对象。 如果您要清除列的内容，请将值设置为 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">null</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">以下代码段会将区域设置具有语言“en”的所有行的区域设置更改为 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">null</code>。 返回值是已更新的行数：</p>
<pre style="word-wrap: break-word;"><code class="hljs processing code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines an object to contain the updated values</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">ContentValues mUpdateValues = <span class="hljs-keyword" style="color: #aa0d91;">new</span> ContentValues();&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines selection criteria for the rows you want to update</span>&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span> mSelectionClause = UserDictionary.Words.LOCALE +  <span class="hljs-string" style="color: #c41a16;">"LIKE ?"</span>;&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span>[] mSelectionArgs = {<span class="hljs-string" style="color: #c41a16;">"en_%"</span>};&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines a variable to contain the number of updated rows</span>&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">int</span> mRowsUpdated = <span class="hljs-number" style="color: #1c00cf;">0</span>;&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">...&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">/*</span>&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;"> * Sets the updated value and updates the selected words.</span>&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;"> */</span>&nbsp;</li><li class="li_linenum " date-linenum="16" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mUpdateValues.putNull(UserDictionary.Words.LOCALE);&nbsp;</li><li class="li_linenum " date-linenum="17" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="18" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mRowsUpdated = getContentResolver().update(&nbsp;</li><li class="li_linenum " date-linenum="19" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.CONTENT_URI,   <span class="hljs-comment" style="color: #006a00;">// the user dictionary content URI</span>&nbsp;</li><li class="li_linenum " date-linenum="20" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mUpdateValues                       <span class="hljs-comment" style="color: #006a00;">// the columns to update</span>&nbsp;</li><li class="li_linenum " date-linenum="21" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause                    <span class="hljs-comment" style="color: #006a00;">// the column to select on</span>&nbsp;</li><li class="li_linenum " date-linenum="22" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs                      <span class="hljs-comment" style="color: #006a00;">// the value to compare to</span>&nbsp;</li><li class="li_linenum " date-linenum="23" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">);&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">您还应该在调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.update()</code> 时检查用户输入。如需了解有关此内容的更多详情，请阅读<a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#Injection" target="_blank" style="color: #0088cc; text-decoration: none;">防止恶意输入</a>部分。</p>
<h4 id="e588a0e999a4e695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">删除数据</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">删除行与检索行数据类似：为要删除的行指定选择条件，客户端方法会返回已删除的行数。 以下代码段会删除应用 ID 与“用户”匹配的行。该方法会返回已删除的行数。</p>
<pre style="word-wrap: break-word;"><code class="hljs processing code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines selection criteria for the rows you want to delete</span>&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span> mSelectionClause = UserDictionary.Words.APP_ID + <span class="hljs-string" style="color: #c41a16;">" LIKE ?"</span>;&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span>[] mSelectionArgs = {<span class="hljs-string" style="color: #c41a16;">"user"</span>};&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Defines a variable to contain the number of rows deleted</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-built_in" style="color: #5c2699;">int</span> mRowsDeleted = <span class="hljs-number" style="color: #1c00cf;">0</span>;&nbsp;</li><li class="li_linenum " date-linenum="7" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="8" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">...&nbsp;</li><li class="li_linenum " date-linenum="9" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="10" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-comment" style="color: #006a00;">// Deletes the words that match the selection criteria</span>&nbsp;</li><li class="li_linenum " date-linenum="11" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">mRowsDeleted = getContentResolver().delete(&nbsp;</li><li class="li_linenum " date-linenum="12" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    UserDictionary.Words.CONTENT_URI,   <span class="hljs-comment" style="color: #006a00;">// the user dictionary content URI</span>&nbsp;</li><li class="li_linenum " date-linenum="13" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionClause                    <span class="hljs-comment" style="color: #006a00;">// the column to select on</span>&nbsp;</li><li class="li_linenum " date-linenum="14" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">    mSelectionArgs                      <span class="hljs-comment" style="color: #006a00;">// the value to compare to</span>&nbsp;</li><li class="li_linenum " date-linenum="15" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">);&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">您还应该在调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.delete()</code> 时检查用户输入。如需了解有关此内容的更多详情，请阅读<a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#Injection" target="_blank" style="color: #0088cc; text-decoration: none;">防止恶意输入</a>部分。</p>
<h3 id="5e38081e68f90e4be9be7a88be5ba8fe695b0e68daee7b1bbe59e8b" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">5、提供程序数据类型</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序可以提供多种不同的数据类型。用户字典提供程序仅提供文本，但提供程序也能提供以下格式：</p>
<ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">整型</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">长整型（长）</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">浮点型</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">长浮点型（双倍）</p></li>
</ul>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序经常使用的另一种数据类型是作为 64KB 字节的数组实施的二进制大型对象 (BLOB)。 您可以通过查看 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor</code> 类“获取”方法看到可用数据类型。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序文档中通常都列出了其每个列的数据类型。 用户字典提供程序的数据类型列在其协定类 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">UserDictionary.Words</code> 参考文档中（<a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#ContractClasses" target="_blank" style="color: #0088cc; text-decoration: none;">协定类</a>部分对协定类进行了介绍）。 您也可以通过调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">Cursor.getType()</code> 来确定数据类型。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序还会维护其定义的每个内容 URI 的 MIME（多用途互联网邮件扩展）数据类型信息。您可以使用 MIME 类型信息查明应用是否可以处理提供程序提供的数据，或根据 MIME 类型选择处理类型。 在使用包含复杂数据结构或文件的提供程序时，通常需要 MIME 类型。 例如，联系人提供程序中的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactsContract.Data</code> 表会使用 MIME 类型来标记每行中存储的联系人数据类型。 要获取与内容 URI 对应的 MIME 类型，请调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.getType()</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#MIMETypeReference" target="_blank" style="color: #0088cc; text-decoration: none;">MIME 类型引用</a>部分介绍了标准和自定义 MIME 类型的语法。</p>
<h3 id="6e38081e68f90e4be9be7a88be5ba8fe8aebfe997aee79a84e69bbfe4bba3e5bda2e5bc8f" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">6、提供程序访问的替代形式</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序访问的三种替代形式在应用开发过程中十分重要：</p>
<ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><strong style="font-weight: bold;">批量访问</strong>：您可以通过 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProviderOperation</code> 类中的方法创建一批访问调用，然后通过 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.applyBatch()</code> 应用它们。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><strong style="font-weight: bold;">异步查询</strong>：您应该在单独线程中执行查询。执行此操作的方式之一是使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">CursorLoader</code> 对象。 <a href="http://developer.android.com/guide/components/loaders.html" target="_blank" style="color: #0088cc; text-decoration: none;">加载器</a>指南中的示例展示了如何执行此操作。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><strong style="font-weight: bold;">通过 Intent 访问数据</strong>：尽管您无法直接向提供程序发送 Intent，但可以向提供程序的应用发送 Intent，后者通常具有修改提供程序数据的最佳配置。<br>
下文将介绍批量访问和修改。</p></li>
</ul>
<h4 id="e689b9e9878fe8aebfe997ae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">批量访问</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">批量访问提供程序适用于插入大量行，或通过同一方法调用在多个表中插入行，或者通常用于跨进程界限将一组操作作为事务处理（原子操作）执行。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">要在“批量模式”下访问提供程序， 您可以创建 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProviderOperation</code> 对象数组，然后使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.applyBatch()</code> 将其分派给内容提供程序。 您需将内容提供程序的<em style="font-style: italic;">授权</em>传递给此方法，而不是特定内容 URI。这样可使数组中的每个 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentProviderOperation</code> 对象都能适用于其他表。 调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContentResolver.applyBatch()</code> 会返回结果数组。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactsContract.RawContacts</code> 协定类 的说明包括展示批量注入的代码段。 联系人管理器示例应用包含在其 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactAdder.java</code> 源文件中进行批量访问的示例。</p>
<h4 id="e9809ae8bf87intente8aebfe997aee695b0e68dae" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 17.5px;"><strong style="font-weight: bold;">通过Intent访问数据</strong></h4>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">Intent 可以提供对内容提供程序的间接访问。即使您的应用不具备访问权限，您也可以通过以下方式允许用户访问提供程序中的数据：从具有权限的应用中获取回结果 Intent，或者通过激活具有权限的应用，然后让用户在其中工作。</p>
<h5 id="e9809ae8bf87e4b8b4e697b6e69d83e99990e88eb7e58f96e8aebfe997aee69d83e99990" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 14px;">通过临时权限获取访问权限</h5>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">即使您没有适当的访问权限，也可以通过以下方式访问内容提供程序中的数据：将 Intent 发送至具有权限的应用，然后接收回包含“URI”权限的结果 Intent。 这些是特定内容 URI 的权限，将持续至接收该权限的 Activity 结束。 具有永久权限的应用将通过在结果 Intent 中设置标志来授予临时权限：</p>
<ul style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">读取权限： FLAG_GRANT_READ_URI_PERMISSION</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">写入权限： FLAG_GRANT_WRITE_URI_PERMISSION</p></li>
</ul>
<blockquote style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 15px; margin-top: 0; margin-right: 0; margin-bottom: 20px; margin-left: 0; border-left: 5px solid #dddddd;">
<p style="margin-top: 0; margin-right: 0; margin-bottom: 0; margin-left: 0; font-size: 16px; font-weight: 300; line-height: 25px;">注：这些标志不会为其授权包含在内容 URI 中的提供程序 提供常规的读取或写入访问权限。访问权限仅适用于 URI 本身。</p>
</blockquote>
<pre style="word-wrap: break-word;"><code class="hljs fortran code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">使用帮助程序应用显示数据&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">如果您的应用具有访问权限，您可能仍想使用 <span class="hljs-type" style="color: #5c2699;">Intent</span> 对象在其他应用中显示数据。 例如，日历应用接受 ACTION_VIEW <span class="hljs-type" style="color: #5c2699;">Intent</span> 对象，用于显示特定的日期或事件。 这样，您可以在不创建自己的 UI 的情况下显示日历信息。如需了解有关此功能的详情，请参见日历提供程序指南。&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">您向其发送 <span class="hljs-type" style="color: #5c2699;">Intent</span> 对象的应用不一定要是与提供程序关联的应用。 例如，您可以从联系人提供程序中检索联系人，然后将包含联系人图像的内容 URI 的 ACTION_VIEW <span class="hljs-type" style="color: #5c2699;">Intent</span> 发送至图像查看器。&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">提供程序使用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;provider&gt;</code>元素的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">android:grantUriPermission</code> 属性以及 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;provider&gt;</code>元素的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">&lt;grant-uri-permission&gt;</code> 子元素在其清单文件中定义内容 URI 的 URI 权限。<a href="http://developer.android.com/guide/topics/security/security.html" target="_blank" style="color: #0088cc; text-decoration: none;">安全与权限</a>指南中“URI 权限”部分更加详细地说明了 URI 权限机制。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，即使您没有 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">READ_CONTACTS</code> 权限，也可以在联系人提供程序中检索联系人的数据。您可能希望在向联系人发送电子生日祝福的应用中执行此操作。 您更愿意让用户控制应用所使用的联系人，而不是请求 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">READ_CONTACTS</code>，让您能够访问用户的所有联系人及其信息。 要执行此操作，您需要使用以下进程：</p>
<ol style="padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 25px;">
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">您的应用会使用方法 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">startActivityForResult()</code> 发送包含操作 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ACTION_PICK</code> 和“联系人”MIME 类型 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">CONTENT_ITEM_TYPE</code>的 Intent 对象。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">由于此 Intent 与“联系人”应用的“选择” Activity 的 Intent 过滤器相匹配，因此 Activity 会显示在前台。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在选择 Activity 中，用户选择要更新的联系人。 发生此情况时，选择 Activity 会调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">setResult(resultcode, intent)</code> 以设置用于返回至应用的 Intent。 Intent 包含用户选择的联系人的内容 URI，以及“extras”标志 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">FLAG_GRANT_READ_URI_PERMISSION</code>。 这些标志会为您的应用授予读取内容 URI 所指向的联系人的数据的 URI 权限。然后，选择 Activity 会调用 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">finish()</code> 以返回对应用的控制。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">您的 Activity 会返回至前台，系统会调用您的 Activity 的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">onActivityResult()</code> 方法。此方法会收到“联系人”应用中选择 Activity 所创建的结果 Intent。</p></li>
<li><p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">通过来自结果 Intent 的内容 URI，您可以读取来自联系人提供程序的联系人数据，即使您未在清单文件中请求对该提供程序的永久读取访问权限。 您可以获取联系人的生日信息或其电子邮件地址，然后发送电子祝福。</p></li>
</ol>
<h5 id="e4bdbfe794a8e585b6e4bb96e5ba94e794a8" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 20px; color: inherit; text-rendering: optimizelegibility; font-size: 14px;">使用其他应用</h5>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">允许用户修改您无权访问的数据的简单方法是激活具有权限的应用，让用户在其中执行工作。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，日历应用接受 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ACTION_INSERT</code> Intent，这让您可以激活应用的插入 UI。您可以在此 Intent（应用将使用该 Intent 来预先填充 UI）中传递“额外”数据，由于定期事件具有复杂的语法，因此将事件插入日历提供程序的首选方式是激活具有 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ACTION_INSERT</code> 的日历应用，然后让用户在其中插入事件。</p>
<h3 id="7e38081e58d8fe5ae9ae7b1bb" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">7、协定类</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">协定类定义帮助应用使用内容 URI、列名称、 Intent 操作以及内容提供程序的其他功能的常量。 协定类未自动包含在提供程序中；提供程序的开发者需要定义它们，然后使其可用于其他开发者。 Android 平台中包含的许多提供程序都在软件包 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">android.provider</code> 中具有对应的协定类。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，用户字典提供程序具有包含内容 URI 和列名称常量的协定类 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">UserDictionary</code>。 “字词”表的内容 URI 在常量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">UserDictionary.Words.CONTENT_URI</code> 中定义。 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">UserDictionary.Words</code> 类也包含列名称常量，本指南的示例代码段中就使用了该常量。 例如，查询投影可以定义为：</p>
<pre style="word-wrap: break-word;"><code class="hljs mathematica code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-keyword" style="color: #aa0d91;">String</span>[] mProjection =&nbsp;</li><li class="li_linenum " date-linenum="2" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-list">{</span>&nbsp;</li><li class="li_linenum " date-linenum="3" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-list">    UserDictionary.Words._ID,</span>&nbsp;</li><li class="li_linenum " date-linenum="4" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-list">    UserDictionary.Words.WORD,</span>&nbsp;</li><li class="li_linenum " date-linenum="5" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-list">    UserDictionary.Words.LOCALE</span>&nbsp;</li><li class="li_linenum " date-linenum="6" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-list">}</span>;&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">联系人提供程序的 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactsContract</code> 也是一个协定类。 此类的参考文档包括示例代码段。其子类之一 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactsContract.Intents.Insert</code> 是包含 Intent 和 Intent 数据的协定类。</p>
<h3 id="8e38081mime20e7b1bbe59e8be5bc95e794a8" style="margin-top: 0.5em; margin-right: 0; margin-bottom: 0.5em; margin-left: 0; font-family: inherit; font-weight: 500; line-height: 1.1; color: inherit; text-rendering: optimizelegibility; font-size: 24.5px;">8、MIME 类型引用</h3>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">内容提供程序可以返回标准 MIME 媒体类型和/或自定义 MIME 类型字符串。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">MIME 类型具有格式</p>
<pre style="word-wrap: break-word;"><code class="hljs haskell code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;"><span class="hljs-typedef"><span class="hljs-keyword" style="color: #aa0d91;">type</span>/subtype</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">例如，众所周知的 MIME 类型 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">text/html</code> 具有 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">text</code> 类型和 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">html</code> 子类型。如果提供程序为 URI 返回此类型，则意味着使用该 URI 的查询会返回包含 HTML 标记的文本。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">自定义 MIME 类型字符串（也称为“特定于供应商”的 MIME 类型）具有更加复杂的类型和子类型值。 类型值始终为</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">vnd<span class="hljs-class">.android</span><span class="hljs-class">.cursor</span><span class="hljs-class">.dir</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">（多行）或</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">vnd<span class="hljs-class">.android</span><span class="hljs-class">.cursor</span><span class="hljs-class">.item</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">（单行）。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><em style="font-style: italic;">子类型</em>特定于提供程序。Android 内置提供程序通常具有简单的子类型。 例如，当联系人应用为电话号码创建行时，它会在行中设置以下 MIME 类型：</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">vnd<span class="hljs-class">.android</span><span class="hljs-class">.cursor</span><span class="hljs-class">.item</span>/phone_v2&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">请注意，子类型值只是 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">phone_v2</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">其他提供程序开发者可能会根据提供程序的授权和表名称创建自己的子类型模式。 例如，假设提供程序包含列车时刻表。 提供程序的授权是 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">com.example.trains</code>，并包含表 Line1、Line2 和 Line3。在响应表 Line1 的内容 URI</p>
<pre style="word-wrap: break-word;"><code class="hljs vim code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">conten<span class="hljs-variable" style="color: #3f6e74;">t:</span>//<span class="hljs-keyword" style="color: #aa0d91;">com</span>.example.trains/Line1&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">时，提供程序会返回 MIME 类型</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">vnd<span class="hljs-class">.android</span><span class="hljs-class">.cursor</span><span class="hljs-class">.dir</span>/vnd<span class="hljs-class">.example</span><span class="hljs-class">.line1</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">在响应表 Line2 中第 5 行的内容 URI</p>
<pre style="word-wrap: break-word;"><code class="hljs vim code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">conten<span class="hljs-variable" style="color: #3f6e74;">t:</span>//<span class="hljs-keyword" style="color: #aa0d91;">com</span>.example.trains/Line2/<span class="hljs-number" style="color: #1c00cf;">5</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">时，提供程序会返回 MIME 类型</p>
<pre style="word-wrap: break-word;"><code class="hljs stylus code_linenums" style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: black; font-size: 90%; padding-top: 0.5em; padding-right: 0.5em; padding-bottom: 0.5em; padding-left: 0.5em; position: relative; display: block; overflow-x: auto; background: #fff; -webkit-text-size-adjust: none;"><ol class="ol_linenums" style="counter-reset: lines 0; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 30px; border-left: 1px solid #e0e0e0;"><li class="li_linenum " date-linenum="1" style="line-height: 20px; margin-left: 10px; list-style: none; counter-increment: lines 1;">vnd<span class="hljs-class">.android</span><span class="hljs-class">.cursor</span><span class="hljs-class">.item</span>/vnd<span class="hljs-class">.example</span><span class="hljs-class">.line2</span>&nbsp;</li></ol></code></pre>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;">大多数内容提供程序都会为其使用的 MIME 类型定义协定类常量。例如，联系人提供程序协定类 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">ContactsContract.RawContacts</code> 会为单个原始联系人行的 MIME 类型定义常量 <code style="background-color: #D6DBDF; border: 0; border-radius: 4px; color: #2C3E50; font-size: 90%; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;">CONTENT_ITEM_TYPE</code>。</p>
<p style="margin-top: 0; margin-right: 0; margin-bottom: 10px; margin-left: 0; line-height: 1.8em;"><a href="http://developer.android.com/intl/zh-cn/guide/topics/providers/content-provider-basics.html#ContentURIs" target="_blank" style="color: #0088cc; text-decoration: none;">内容 URI</a> 部分介绍了单个行的内容 URI。</p>
</div>
</body>
</div></div>
</body></html>

